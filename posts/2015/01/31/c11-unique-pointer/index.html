<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>C++11 Unique Pointer</title>
  <meta name="author" content="Logan">

  <link href="http://logan.tw/feeds/atom.xml" type="application/atom+xml" rel="alternate"
        title="Logan's Note Atom Feed" />
  <link href="http://logan.tw/feeds/rss.xml" type="application/rss+xml" rel="alternate"
        title="Logan's Note RSS Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://logan.tw/favicon.png" rel="icon">
  <link href="http://logan.tw/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://logan.tw/theme/js/modernizr-2.0.js"></script>
  <script src="http://logan.tw/theme/js/ender.js"></script>
  <script src="http://logan.tw/theme/js/octopress.js" type="text/javascript"></script>

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://logan.tw/">Logan's Note</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://logan.tw/feeds/atom.xml" rel="subscribe-atom">Atom</a></li>
  <li><a href="http://logan.tw/feeds/rss.xml" rel="subscribe-rss">RSS</a></li>
</ul>



<ul class="main-navigation">
    <li><a href="/">home</a></li>
    <li><a href="/blog/">blog</a></li>
    <li><a href="/archives/">archives</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">C++11 Unique Pointer</h1>
      <p class="meta"><time datetime="2015-01-31T23:04:00+08:00" pubdate>Sat 31 January 2015</time></p>
</header>

  <div class="entry-content"><p>C++11 introduced three new <a class="reference external" href="http://en.cppreference.com/w/cpp/memory">smart pointer class templates</a>:
<code>std::unique_ptr</code>, <code>std::shared_ptr</code>, and <code>std::weak_ptr</code>.
These smart pointer class templates are designed to replace the old
<a class="reference external" href="http://en.cppreference.com/w/cpp/memory/auto_ptr">std::auto_ptr</a> smart pointer, which is known to have some defect and
deprecated now.  In this post, I would like to give a brief introduction to
<code>std::unique_ptr</code>.</p>
<p>The unique pointer is designed to be a <strong>fast</strong> smart pointer that has an
<strong>exclusive ownership</strong> of the pointee.  The unique pointer is responsible to
delete the pointee whenever the unique pointer is reset or destructed.</p>
<div class="section" id="basic-usage">
<h2>Basic Usage</h2>
<p>Here are the basic usages of unique pointer:</p>
<ul class="simple">
<li><code>std::unique_ptr&lt;T&gt;()</code> -- Default constructor which constructs an
null pointer.</li>
<li><code>std::unique_ptr&lt;T&gt;(T* p)</code> -- Construct an unique pointer from a the
raw pointer <code>p</code>.</li>
<li><code>get()</code> -- Get the raw pointer stored in the unique pointer.</li>
<li><code>reset(T* p)</code> -- Delete the pointee and reset to <code>p</code>.</li>
<li><code>reset()</code> -- Delete the pointee and reset to <code>nullptr</code>.</li>
<li><code>release()</code> -- Return the raw pointer and set the unique pointer to
<code>nullptr</code>.  This function does not delete the pointee.</li>
</ul>
<p>For example:</p>
<div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;memory&gt;</span>

<span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">A</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A::A(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A::~A(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A::test()&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TEST1: constructor and get()&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p1</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p1.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p1</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p2</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p2.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p2</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">// Call the member function</span>
    <span class="n">p2</span><span class="o">-&gt;</span><span class="n">test</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TEST2: reset()&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">p</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">p</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">p</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;p.get() = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;TEST3: release()&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">A</span><span class="o">*</span> <span class="n">a</span><span class="p">;</span>

    <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: unique pointer p&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
      <span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: unique pointer p&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="k">delete</span> <span class="n">a</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="movable-but-non-copyable">
<h2>Movable but Non-copyable</h2>
<p>To ensure the exclusive ownership guarantee, the unique pointer is designed
to be non-copyable.  In the other words, you can't create an unique pointer
by copying the other unique pointer instance.  For example, the following code
is illegal:</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">example1</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p1</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p2</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span>  <span class="c1">// WON&#39;T COMPILE</span>
<span class="p">}</span>
</pre></div>
<p>This doesn't compile either:</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">example2</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p1</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p2</span><span class="p">;</span>
  <span class="n">p2</span> <span class="o">=</span> <span class="n">p1</span><span class="p">;</span>  <span class="c1">// WON&#39;T COMPILE</span>
<span class="p">}</span>
</pre></div>
<p>Fortunately, the unique pointer is movable, thus we can return an unique
pointer without problems:</p>
<div class="highlight"><pre><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">create_instance</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
  <span class="c1">// ...</span>
  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>  <span class="c1">// OK</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">pa</span><span class="p">(</span><span class="n">create_instance</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
<p>In addition, the unique pointer can be assigned from
<code>std::unique_ptr&lt;T&gt;&amp;&amp;</code>, the R-value reference to the unique pointer:</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">build_object</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">tmp</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">());</span>
  <span class="c1">// ...</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>  <span class="c1">// OK</span>
  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>Notice that in this example, the <code>std::move()</code> is essential.
We have to cast the local variable <code>tmp</code> to <code>std::unique_ptr&lt;A&gt;&amp;&amp;</code>
with <code>std::move(tmp)</code>; otherwise, the code won't compile because
<code>tmp</code> is an L-value.</p>
</div>
<div class="section" id="derived-class">
<h2>Derived Class</h2>
<p><code>std::unique_ptr&lt;T&gt;</code> is similar to the raw pointer type <code>T*</code>.
If class B is derived from class A, then we can upcast
<code>std::unique_ptr&lt;B&gt;</code> to <code>std::unique_ptr&lt;A&gt;</code>.  However,
similar to the raw pointer, the late binding will only happen on the
virtual functions.  For the non-virtual functions, the callee function
will be statically resolved at compile time.  This rule also applies to
the destructor of the pointee.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span> <span class="cm">/* ... Skipped ... */</span> <span class="p">};</span>

<span class="k">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="k">public</span> <span class="n">A</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">B</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;B::B(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="o">~</span><span class="n">B</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;B::~B(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### TEST 1&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">pa</span><span class="p">(</span><span class="k">new</span> <span class="n">B</span><span class="p">());</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### TEST 2&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span> <span class="n">pb</span><span class="p">(</span><span class="k">new</span> <span class="n">B</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The output shows that:</p>
<div class="highlight"><pre>### TEST 1
A::A(this=0xa6d010)
B::B(this=0xa6d010)
A::~A(this=0xa6d010)

### TEST 2
A::A(this=0xa6d010)
B::B(this=0xa6d010)
B::~B(this=0xa6d010)
A::~A(this=0xa6d010)
</pre></div>
<p>Notice that the object allocated at address 0xa6d010 is not destructed with
<code>B::~B()</code>.  Conceptually, the <code>main()</code> function above is equivalent
to:</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### TEST 1&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">A</span> <span class="o">*</span><span class="n">pa</span> <span class="o">=</span> <span class="k">new</span> <span class="n">B</span><span class="p">();</span>
    <span class="k">delete</span> <span class="n">pa</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### TEST 2&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">B</span> <span class="o">*</span><span class="n">pb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">B</span><span class="p">();</span>
    <span class="k">delete</span> <span class="n">pb</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Since the destructor of A is not declared as virtual, the invocation of the
destructor won't be dynamically dispatched.  To fix the problem, we have to
declare <code>A::~A()</code> as virtual.</p>
</div>
<div class="section" id="pointer-to-array">
<h2>Pointer to Array</h2>
<p>The unique pointer can point to an array as well.  However, it is important
that the pointer type should be <code>A[]</code> instead of <code>A</code>.  If the
element type is incorrect, then the default deleter won't be able to delete
the array properly.</p>
<div class="highlight"><pre><span class="c1">// Correct Example</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="p">[]</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// Incorrect Example</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="k">new</span> <span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
<p>Here is the output of the code snippet above:</p>
<div class="highlight"><pre>A::A(this=0x2161018)
A::A(this=0x2161019)
A::A(this=0x216101a)
A::~A(this=0x216101a)
A::~A(this=0x2161019)
A::~A(this=0x2161018)

A::A(this=0x2161018)
A::A(this=0x2161019)
A::A(this=0x216101a)
A::~A(this=0x216101a)
</pre></div>
<p>Notice that the second unique pointer will only delete the first element
of the array since the unique pointer thought it was only pointing to one
element.</p>
</div>
<div class="section" id="custom-deleter">
<h2>Custom Deleter</h2>
<p>In fact, the unique pointer class template <code>std::unique_ptr&lt;T, D&gt;</code>
has two template parameters.  The first template parameter is the pointee
type, and the second template parameter is the <strong>deleter type</strong>.  With the
deleter type, we can customize the destruction policy of the pointee.</p>
<p>If the programmer doesn't specify the deleter type, then the default deleter
will be <code>std::default_delete</code>.  The default deleter will destruct the
object with <code>delete</code> operator when <code>T</code> is a non-array type and
destruct the object with <code>delete[]</code> operator when <code>T</code> is an
array type.</p>
<p>In the following example, we are going to define a <code>ExampleDeleter</code>
function object which will call the object pool to reclaim and recycle the
pointee instead of deleting the pointee:</p>
<div class="highlight"><pre><span class="cp">#include &lt;cassert&gt;</span>
<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;list&gt;</span>
<span class="cp">#include &lt;memory&gt;</span>

<span class="k">class</span> <span class="nc">ExamplePool</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Example</span> <span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
  <span class="n">ExamplePool</span> <span class="o">*</span><span class="n">pool_</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="n">Example</span><span class="p">(</span><span class="n">ExamplePool</span> <span class="o">&amp;</span><span class="n">pool</span><span class="p">)</span> <span class="o">:</span> <span class="n">pool_</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pool</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Example::Example(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">~</span><span class="n">Example</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Example::~Example(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">inline</span> <span class="kt">void</span> <span class="n">reclaim</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ExampleDeleter</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span><span class="n">Example</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ptr</span><span class="o">-&gt;</span><span class="n">reclaim</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ExamplePool</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Example</span><span class="p">,</span> <span class="n">ExampleDeleter</span><span class="o">&gt;</span> <span class="n">Handle</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
  <span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">Example</span><span class="o">&gt;</span> <span class="n">used_list_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">Example</span><span class="o">&gt;</span> <span class="n">free_list_</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="n">Handle</span> <span class="n">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">free_list_</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
      <span class="n">used_list_</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Reuse: &quot;</span> <span class="o">&lt;&lt;</span> <span class="o">&amp;</span><span class="n">used_list_</span><span class="p">.</span><span class="n">back</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="n">used_list_</span><span class="p">.</span><span class="n">splice</span><span class="p">(</span><span class="n">used_list_</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">free_list_</span><span class="p">,</span> <span class="n">free_list_</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">Handle</span><span class="p">(</span><span class="o">&amp;</span><span class="n">used_list_</span><span class="p">.</span><span class="n">back</span><span class="p">());</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">reclaim</span><span class="p">(</span><span class="n">Example</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Reclaim: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">ptr</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">used_list_</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">end</span> <span class="o">=</span> <span class="n">used_list_</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
         <span class="n">it</span> <span class="o">!=</span> <span class="n">end</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">&amp;*</span><span class="n">it</span> <span class="o">==</span> <span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">free_list_</span><span class="p">.</span><span class="n">splice</span><span class="p">(</span><span class="n">free_list_</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">used_list_</span><span class="p">,</span> <span class="n">it</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">assert</span><span class="p">(</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="s">&quot;ptr not found&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="kt">void</span> <span class="n">Example</span><span class="o">::</span><span class="n">reclaim</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pool_</span><span class="o">-&gt;</span><span class="n">reclaim</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">ExamplePool</span> <span class="n">pool</span><span class="p">;</span>

  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h1&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">h1</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>

    <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h2&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h2</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: h2&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h3&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h3</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h4&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h4</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: h3, h4&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: h1&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h5&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">h5</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
    <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h6&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h7&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h7</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h8&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h8</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h9&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="k">auto</span> <span class="n">h9</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: h6, h7, h8, h9&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### BEGIN: h10&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">h10</span> <span class="o">=</span> <span class="n">pool</span><span class="p">.</span><span class="n">create</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;### END: h5, h10&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="linked-list-example">
<h2>Linked List Example</h2>
<p>Finally, I would like to demonstrate that can implement the singly linked
list with the following code:</p>
<div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;memory&gt;</span>

<span class="k">class</span> <span class="nc">List</span> <span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&gt;</span> <span class="n">next_</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="n">List</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;List::List(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">~</span><span class="n">List</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;List::~List(this=&quot;</span> <span class="o">&lt;&lt;</span> <span class="k">this</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;)&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">List</span><span class="o">*</span> <span class="n">next</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">next_</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">insert_after</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&gt;</span> <span class="n">ins</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ins</span><span class="o">-&gt;</span><span class="n">next_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">next_</span><span class="p">);</span>
    <span class="n">next_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">ins</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---- BEGIN first&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&gt;</span> <span class="n">first</span><span class="p">(</span><span class="k">new</span> <span class="n">List</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---- BEGIN second&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">{</span>
      <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&gt;</span> <span class="n">second</span><span class="p">(</span><span class="k">new</span> <span class="n">List</span><span class="p">());</span>
      <span class="n">first</span><span class="o">-&gt;</span><span class="n">insert_after</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">second</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---- END second&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---- END first&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>In this post, I have given a brief introduction to <code>std::unique_ptr</code>.
We started from the basic usage of unique pointer and then we went through
different topics including the pointer to derived classes, the pointer to
array, and the unique pointer deleter.  Finally, we showed that we can build
a simple singly linked list with <code>std::unique_ptr</code>.  Hope you enjoy
this article.</p>
<p>In the next post, I would like to introduce the usage of the shared
smart pointers.  Both <code>std::shared_ptr</code> and <code>std::weak_ptr</code>
are included.  Stay in tune!  :-)</p>
</div>
</div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Logan</span>
  </span>
<time datetime="2015-01-31T23:04:00+08:00" pubdate>Sat 31 January 2015</time>  <span class="categories">
    <a class="category" href="http://logan.tw/tag/cxx/">cxx</a>
  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://logan.tw/posts/2015/04/28/check-code-coverage-with-clang-and-lcov/">Check Code Coverage with Clang and LCOV</a>
      </li>
      <li class="post">
          <a href="http://logan.tw/posts/2015/03/10/trace-source-code-with-vim-and-ctags/">Trace Source Code with Vim and Ctags</a>
      </li>
      <li class="post">
          <a href="http://logan.tw/posts/2015/02/28/git-ignore-file/">Git Ignore File</a>
      </li>
      <li class="post">
          <a href="http://logan.tw/posts/2015/02/21/using-aria2-download-manager/">Using Aria2 Download Manager</a>
      </li>
      <li class="post">
          <a href="http://logan.tw/posts/2015/01/31/c11-unique-pointer/">C++11 Unique Pointer</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://logan.tw/category/misc/">misc</a></li>
        <li><a href="http://logan.tw/category/programming/">programming</a></li>
        <li><a href="http://logan.tw/category/web/">web</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://logan.tw/tag/pelican/">pelican</a>,    <a href="http://logan.tw/tag/autossh/">autossh</a>,    <a href="http://logan.tw/tag/opencl/">opencl</a>,    <a href="http://logan.tw/tag/grub/">grub</a>,    <a href="http://logan.tw/tag/cxx/">cxx</a>,    <a href="http://logan.tw/tag/wsgi/">wsgi</a>,    <a href="http://logan.tw/tag/vim/">vim</a>,    <a href="http://logan.tw/tag/plt/">plt</a>,    <a href="http://logan.tw/tag/linux/">linux</a>,    <a href="http://logan.tw/tag/git/">git</a>,    <a href="http://logan.tw/tag/gcin/">gcin</a>,    <a href="http://logan.tw/tag/apache2/">apache2</a>,    <a href="http://logan.tw/tag/init/">init</a>,    <a href="http://logan.tw/tag/https/">https</a>,    <a href="http://logan.tw/tag/test/">test</a>,    <a href="http://logan.tw/tag/ctags/">ctags</a>,    <a href="http://logan.tw/tag/tips/">tips</a>,    <a href="http://logan.tw/tag/llvm/">llvm</a>,    <a href="http://logan.tw/tag/http/">http</a>,    <a href="http://logan.tw/tag/python/">python</a>,    <a href="http://logan.tw/tag/upstart/">upstart</a>,    <a href="http://logan.tw/tag/clang/">clang</a>,    <a href="http://logan.tw/tag/ssl/">ssl</a>,    <a href="http://logan.tw/tag/diary/">diary</a>,    <a href="http://logan.tw/tag/ssh/">ssh</a>,    <a href="http://logan.tw/tag/ubuntu/">ubuntu</a>,    <a href="http://logan.tw/tag/debian/">debian</a>,    <a href="http://logan.tw/tag/compiler/">compiler</a>,    <a href="http://logan.tw/tag/c/">c</a>,    <a href="http://logan.tw/tag/github/">github</a>,    <a href="http://logan.tw/tag/stl/">stl</a>,    <a href="http://logan.tw/tag/logic/">logic</a>,    <a href="http://logan.tw/tag/aria2/">aria2</a>,    <a href="http://logan.tw/tag/lcov/">lcov</a>,    <a href="http://logan.tw/tag/processor/">processor</a>,    <a href="http://logan.tw/tag/waliki/">waliki</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="http://logan.tw/feeds/rss.xml" type="application/rss+xml" rel="alternate">RSS</a></li>
            <li><a href="http://logan.tw/feeds/atom.xml" type="application/atom+xml" rel="alternate">Atom</a></li>
            <li><a href="http://facebook.com/loganchien" target="_blank">facebook</a></li>
            <li><a href="http://plus.google.com/+LoganChienTW" target="_blank">google+</a></li>
            <li><a href="http://github.com/loganchien" target="_blank">github</a></li>
            <li><a href="https://www.linkedin.com/in/loganchien" target="_blank">linkedin</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://logan.tw" target="_blank">Web</a></li>
            <li><a href="http://blog.logan.tw" target="_blank">Blog (Taiwan)</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2014-2015  - Logan -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-57011197-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-57011197-1');
    ga('send', 'pageview');
</script>
</body>
</html>