<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Logan's Note - misc</title><link href="http://logan.tw/" rel="alternate"></link><link href="http://logan.tw/feeds/misc.atom.xml" rel="self"></link><id>http://logan.tw/</id><updated>2015-11-08T15:19:00+08:00</updated><entry><title>Fix Nautilus Video Thumbnails</title><link href="http://logan.tw/posts/2015/11/08/fix-nautilus-video-thumbnails/" rel="alternate"></link><published>2015-11-08T15:19:00+08:00</published><updated>2015-11-08T15:19:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2015-11-08:/posts/2015/11/08/fix-nautilus-video-thumbnails/</id><summary type="html">&lt;p&gt;I have a clean &lt;a class="reference external" href="http://ubuntu.com"&gt;Ubuntu&lt;/a&gt; 15.10 installation these days.  However, I noticed
that video thumbnails (or previews) do not show up in Gnome &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt;:&lt;/p&gt;
&lt;img alt="Nautilus without video preview thumbnails" src="http://logan.tw/static/images/nautilus-no-video-thumbnail.png" /&gt;
&lt;p&gt;I prefer thumbnails to icons.  Besides, I remember that &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt; will generate
a thumbnail for each video in &lt;a class="reference external" href="http://ubuntu.com"&gt;Ubuntu&lt;/a&gt; 14.04.  Thus, I took some …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have a clean &lt;a class="reference external" href="http://ubuntu.com"&gt;Ubuntu&lt;/a&gt; 15.10 installation these days.  However, I noticed
that video thumbnails (or previews) do not show up in Gnome &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt;:&lt;/p&gt;
&lt;img alt="Nautilus without video preview thumbnails" src="http://logan.tw/static/images/nautilus-no-video-thumbnail.png" /&gt;
&lt;p&gt;I prefer thumbnails to icons.  Besides, I remember that &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt; will generate
a thumbnail for each video in &lt;a class="reference external" href="http://ubuntu.com"&gt;Ubuntu&lt;/a&gt; 14.04.  Thus, I took some time to
look for the reason.&lt;/p&gt;
&lt;p&gt;After trials and errors, I found &lt;code&gt;gstreamer1.0-libav&lt;/code&gt; is the package in
question.  It is not installed by default.  We can install it with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install gstreamer1.0-libav
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In addition, we should clean the thumbnail cache; otherwise &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt; won't
regenerate thumbnails for videos.  To clean the thumbnail cache:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ rm -r ~/.cache/thumbnails/fail
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, refresh &lt;a class="reference external" href="https://wiki.gnome.org/Apps/Nautilus"&gt;Nautilus&lt;/a&gt; with &lt;code&gt;Ctrl-R&lt;/code&gt;.  We should be able to see the
thumbnails now:&lt;/p&gt;
&lt;img alt="Nautilus with video preview thumbnails" src="http://logan.tw/static/images/nautilus-video-thumbnail.png" /&gt;
&lt;p&gt;If you still can't see thumbnails, it is possible that your videos are encoded
by less popular codecs.  Installing &lt;code&gt;gstreamer1.0-plugins-ugly&lt;/code&gt; or
&lt;code&gt;gstreamer1.0-plugins-bad&lt;/code&gt; might help:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install gstreamer1.0-plugins-ugly
$ sudo apt-get install gstreamer1.0-plugins-bad
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, please notice that &lt;code&gt;gstreamer1.0-plugins-ugly&lt;/code&gt; might be covered
by more restrict licenses or patents.  And &lt;code&gt;gstreamer1.0-plugins-bad&lt;/code&gt;
might have worse quality, e.g. lack of code review, documentations, tests, and
etc.  Read &lt;a class="reference external" href="http://gstreamer.freedesktop.org/documentation/splitup.html"&gt;GStreamer plug-ins splitup&lt;/a&gt; for more details.&lt;/p&gt;
&lt;div class="section" id="reference"&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://gstreamer.freedesktop.org/"&gt;GStreamer&lt;/a&gt; - open source media framework&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://gstreamer.freedesktop.org/documentation/splitup.html"&gt;GStreamer plug-ins splitup&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content><category term="linux"></category><category term="ubuntu"></category><category term="gnome"></category></entry><entry><title>Troubleshooting adb No Permissions Problem</title><link href="http://logan.tw/posts/2015/05/25/troubleshooting-adb-no-permissions-problem/" rel="alternate"></link><published>2015-05-25T21:59:00+08:00</published><updated>2015-05-25T21:59:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2015-05-25:/posts/2015/05/25/troubleshooting-adb-no-permissions-problem/</id><summary type="html">&lt;p&gt;I got an Android Nexus 7 (2013, Wi-Fi) device a short while ago.  I attached
the device to my computer and tried to list the devices with &lt;code&gt;adb
devices&lt;/code&gt; command.  But, unfortunately, I got the following error message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb devices
List of devices attached
????????????    no permissions
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the following of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I got an Android Nexus 7 (2013, Wi-Fi) device a short while ago.  I attached
the device to my computer and tried to list the devices with &lt;code&gt;adb
devices&lt;/code&gt; command.  But, unfortunately, I got the following error message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb devices
List of devices attached
????????????    no permissions
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the following of the post, I would like to explain how did I fix the
problem.&lt;/p&gt;
&lt;div class="section" id="adb-server-with-root-permission"&gt;
&lt;h2&gt;ADB Server with Root Permission&lt;/h2&gt;
&lt;p&gt;First, we can run &lt;code&gt;adb&lt;/code&gt; command with &lt;strong&gt;root&lt;/strong&gt; permission, and check
whether we can list the devices with &lt;code&gt;sudo&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Stop the adb server (which will be restarted later.)&lt;/span&gt;
$ adb kill-server

&lt;span class="c1"&gt;# Open a root shell.&lt;/span&gt;
$ sudo -s

&lt;span class="c1"&gt;# Run &amp;quot;adb device&amp;quot; with in the root shell.&lt;/span&gt;
&amp;gt; adb devices
List of devices attached
057d7cxx    device

&lt;span class="c1"&gt;# Stop the adb server with root permission.&lt;/span&gt;
&amp;gt; adb kill-server

&lt;span class="c1"&gt;# Leave the root shell.&lt;/span&gt;
&amp;gt; &lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK.  It seems that everything works fine with &lt;strong&gt;root&lt;/strong&gt; permission.  If we can
see the device with &lt;strong&gt;root&lt;/strong&gt; permission, then the underlying problem is that
the user is not allowed to access the USB device.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configure-udev-for-usb-access"&gt;
&lt;h2&gt;Configure udev for USB Access&lt;/h2&gt;
&lt;p&gt;To grant the USB access to an user, you can follow the instructions in
&lt;a class="reference external" href="http://source.android.com/source/initializing.html#configuring-usb-access"&gt;Configuring USB Access&lt;/a&gt;.  In short, there are following steps:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Create a new &lt;strong&gt;udev&lt;/strong&gt; configuration file at
&lt;code&gt;/etc/udev/rules.d/51-android.rules&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Copy the settings from &lt;a class="reference external" href="http://source.android.com/source/initializing.html#configuring-usb-access"&gt;Configuring USB Access&lt;/a&gt; and replace
&lt;code&gt;&amp;lt;username&amp;gt;&lt;/code&gt; with your Linux username.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Reload the &lt;strong&gt;udev&lt;/strong&gt; configuration with:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ sudo udevadm control --reload-rules
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Re-plug the Android device.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you are lucky, this should work for you.&lt;/p&gt;
&lt;p&gt;However, it doesn't work for me because the &lt;em&gt;vendor ID&lt;/em&gt; and &lt;em&gt;product&lt;/em&gt; ID of my
device are not listed in &lt;a class="reference external" href="http://source.android.com/source/initializing.html#configuring-usb-access"&gt;Configuring USB Access&lt;/a&gt;.  I have to figure out the
&lt;em&gt;vendor ID&lt;/em&gt; and &lt;em&gt;product ID&lt;/em&gt; by myself.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="find-usb-vendor-and-product-id-for-udev-rules"&gt;
&lt;h2&gt;Find USB Vendor and Product ID for udev Rules&lt;/h2&gt;
&lt;p&gt;We can check the USB &lt;em&gt;vendor ID&lt;/em&gt; and &lt;em&gt;product ID&lt;/em&gt; with &lt;code&gt;lsusb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsusb
Bus &lt;span class="m"&gt;003&lt;/span&gt; Device &lt;span class="m"&gt;013&lt;/span&gt;: ID 18d1:4ee7 Google Inc.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this example, &lt;code&gt;18d1&lt;/code&gt; is the &lt;em&gt;vendor ID&lt;/em&gt; and &lt;code&gt;4ee7&lt;/code&gt; is the
&lt;em&gt;product ID&lt;/em&gt; for my Android device.  Thus, I added the following rule:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# adb protocol on flo (Nexus 7 2013)&lt;/span&gt;
&lt;span class="nv"&gt;SUBSYSTEM&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;usb&amp;quot;&lt;/span&gt;, ATTR&lt;span class="o"&gt;{&lt;/span&gt;idVendor&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;18d1&amp;quot;&lt;/span&gt;, ATTR&lt;span class="o"&gt;{&lt;/span&gt;idProduct&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4ee7&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;MODE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0600&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;OWNER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;username&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, we can reload the &lt;strong&gt;udev&lt;/strong&gt; rules with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo udevadm control --reload-rules
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After re-pluging the device, we should be able to see the devices with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb devices
List of devices attached
057d7cxx    device
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, notice that the bootloader has different &lt;em&gt;product ID&lt;/em&gt;, thus we have
have to reboot to bootloader mode:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ adb reboot bootloader

$ lsusb
Bus &lt;span class="m"&gt;003&lt;/span&gt; Device &lt;span class="m"&gt;013&lt;/span&gt;: ID 18d1:4ee0 Google Inc.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It seems that we have to add &lt;code&gt;18d1:4ee0&lt;/code&gt; to udev rules as well:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# fastboot protocol on flo (Nexus 7 2013)&lt;/span&gt;
&lt;span class="nv"&gt;SUBSYSTEM&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;usb&amp;quot;&lt;/span&gt;, ATTR&lt;span class="o"&gt;{&lt;/span&gt;idVendor&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;18d1&amp;quot;&lt;/span&gt;, ATTR&lt;span class="o"&gt;{&lt;/span&gt;idProduct&lt;span class="o"&gt;}==&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;4ee0&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;MODE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0600&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;OWNER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;username&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Reload the &lt;strong&gt;udev&lt;/strong&gt; configuration again.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo udevadm control --reload-rules
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, re-plug the USB device again.  Everything should work now!&lt;/p&gt;
&lt;p&gt;If this still doesn't work, then restart the &lt;strong&gt;udev&lt;/strong&gt; service with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo service udev restart
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hoping this post will help.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="reference"&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;StackExchange: &lt;a class="reference external" href="http://unix.stackexchange.com/questions/39370/how-to-reload-udev-rules-without-reboot"&gt;How to reload udev rules without reboot?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="android"></category><category term="udev"></category><category term="linux"></category><category term="ubuntu"></category></entry><entry><title>Grub Install and Btrfs Root File System</title><link href="http://logan.tw/posts/2015/05/17/grub-install-and-btrfs-root-file-system/" rel="alternate"></link><published>2015-05-17T01:44:00+08:00</published><updated>2015-05-17T01:44:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2015-05-17:/posts/2015/05/17/grub-install-and-btrfs-root-file-system/</id><summary type="html">&lt;p&gt;Recently, the Linux operating system on my laptop no longer boots.  It seems
that the boot sector for &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; bootloader is corrupted.  I tried to
&lt;strong&gt;reinstall GRUB&lt;/strong&gt; with an Ubuntu LiveCD; however, I have encountered some
problem related to &lt;a class="reference external" href="https://btrfs.wiki.kernel.org/"&gt;Btrfs&lt;/a&gt; file system (which is the file system for my root …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently, the Linux operating system on my laptop no longer boots.  It seems
that the boot sector for &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; bootloader is corrupted.  I tried to
&lt;strong&gt;reinstall GRUB&lt;/strong&gt; with an Ubuntu LiveCD; however, I have encountered some
problem related to &lt;a class="reference external" href="https://btrfs.wiki.kernel.org/"&gt;Btrfs&lt;/a&gt; file system (which is the file system for my root
mount point &lt;code&gt;/&lt;/code&gt;.)&lt;/p&gt;
&lt;p&gt;After several attempts, I finally reinstalled &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; to the hard disk.  I feel
that it will be good idea to write the steps down, since I can't find any
useful suggestion at the time of writing.&lt;/p&gt;
&lt;div class="section" id="preparation"&gt;
&lt;h2&gt;Preparation&lt;/h2&gt;
&lt;p&gt;Before changing anything, it will be better to understand the situation
beforehand.  Check the status and find the correct device file with &lt;code&gt;sudo
fdisk -l&lt;/code&gt; command or the &lt;a class="reference external" href="http://gparted.org/"&gt;GParted&lt;/a&gt; GUI tool.&lt;/p&gt;
&lt;p&gt;For example, on my laptop, the main hard drive is &lt;code&gt;/dev/SDA&lt;/code&gt;, and
according to the result of &lt;code&gt;fdisk&lt;/code&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;code&gt;/dev/SDA1&lt;/code&gt; is the partition for the EFI firmwares, which is a FAT32
partition.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/dev/SDA4&lt;/code&gt; is the &lt;strong&gt;root file system&lt;/strong&gt; for the Linux installation,
which is a &lt;cite&gt;Btrfs&lt;/cite&gt; partition.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Besides, I would like to reinstall &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; to &lt;code&gt;/dev/SDA&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="steps"&gt;
&lt;h2&gt;Steps&lt;/h2&gt;
&lt;p&gt;After gathering the necessary information, we can start our work.  In summary,
there are three steps:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Mount the file systems.&lt;/li&gt;
&lt;li&gt;Switch to the root file system with &lt;code&gt;chroot&lt;/code&gt; command and fix the
problem inside the chroot.&lt;/li&gt;
&lt;li&gt;Unmount the file systems.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I will elobrate them in the following paragraphs.&lt;/p&gt;
&lt;div class="section" id="mount-the-file-systems"&gt;
&lt;h3&gt;Mount the File Systems&lt;/h3&gt;
&lt;p&gt;First, create a directory as a mount point for &lt;strong&gt;root file system&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo mkdir mnt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Second, mount the &lt;strong&gt;root file system&lt;/strong&gt; with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo mount -o &lt;span class="nv"&gt;subvol&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;@ /dev/SDA4 mnt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that it is &lt;em&gt;required&lt;/em&gt; to specify the &lt;a class="reference external" href="https://btrfs.wiki.kernel.org/"&gt;Btrfs&lt;/a&gt; subvolume with the
&lt;code&gt;-o subvol=&lt;/code&gt; option.  We will explain this later.  On the default Ubuntu
installation, the subvolume for the root file system is named after &lt;code&gt;&amp;#64;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Third, mount the special file system for the &lt;strong&gt;chroot&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="k"&gt;for&lt;/span&gt; i in dev dev/pts sys proc run&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; sudo mount --bind /&lt;span class="nv"&gt;$i&lt;/span&gt; mnt/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fourth, if you are using &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface"&gt;UEFI&lt;/a&gt;, you should mount the EFI boot partition
as well:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo mount /dev/SDA1 mnt/boot/efi
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="change-root-and-reinstall-grub"&gt;
&lt;h3&gt;Change Root and Reinstall GRUB&lt;/h3&gt;
&lt;p&gt;Now, we can switch to the root file system with the &lt;code&gt;chroot&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chroot mnt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the chroot, we can reinstall the &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; bootloader with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; grub-install /dev/SDA
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Remarks: If you see the error messages like &amp;quot;&lt;code&gt;cannot find a device for
...&lt;/code&gt;&amp;quot;, then it is possible that some partition is not mounted properly.  As a
result, &lt;code&gt;grub-probe&lt;/code&gt; can't detect the devices for the existing
configuration.&lt;/p&gt;
&lt;p&gt;For example, in my first attempt, I have seen the following error message:&lt;/p&gt;
&lt;blockquote&gt;
grub-install: error: cannot find a device for /boot/grub (is /dev mounted?)&lt;/blockquote&gt;
&lt;p&gt;This is due to the fact that the &lt;a class="reference external" href="https://btrfs.wiki.kernel.org/"&gt;Btrfs&lt;/a&gt; subvolume was mentioned in the
configuration file but I didn't specify the &lt;code&gt;subvol=&lt;/code&gt; option when I was
mounting the root file system in the first attempt.  If you encounter similar
error messages, double check the &lt;code&gt;/etc/fstab&lt;/code&gt; and the mount options.&lt;/p&gt;
&lt;p&gt;Now, we can verify the &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB&lt;/a&gt; installation and update the configuration files
with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; grub-install --recheck /dev/SDA

&amp;gt; update-grub
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, leave the chroot with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; &lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="unmount-the-file-systems"&gt;
&lt;h3&gt;Unmount the File Systems&lt;/h3&gt;
&lt;p&gt;Now, we would like to unmount the file systems so that the changes can be
flushed properly.&lt;/p&gt;
&lt;p&gt;First, unmount the EFI partition (if available):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo umount mnt/boot/efi
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Second, unmount the special file systems:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="k"&gt;for&lt;/span&gt; i in run proc sys dev/pts dev&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; sudo umount mnt/&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Third, unmount the root file systems and delete the mount point:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo umount mnt

$ sudo rmdir mnt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That's all.  You can reboot the computer now!  Hoping this will fix your
problem.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="reference"&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://howtoubuntu.org/how-to-repair-restore-reinstall-grub-2-with-a-ubuntu-live-cd"&gt;How to Repair, Restore, or Reinstall Grub 2 with a Ubuntu Live CD or USB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="linux"></category><category term="grub"></category></entry><entry><title>Using Aria2 Download Manager</title><link href="http://logan.tw/posts/2015/02/21/using-aria2-download-manager/" rel="alternate"></link><published>2015-02-21T23:02:00+08:00</published><updated>2015-02-21T23:02:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2015-02-21:/posts/2015/02/21/using-aria2-download-manager/</id><summary type="html">&lt;p&gt;I used to download the large files with &lt;code&gt;wget&lt;/code&gt; because I can simply
resume the download tasks with &lt;code&gt;-c&lt;/code&gt; option.  This option will check
the size of the output file, and download the rest of the file from the server.
I can even restart the download task with a &lt;strong&gt;different …&lt;/strong&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;I used to download the large files with &lt;code&gt;wget&lt;/code&gt; because I can simply
resume the download tasks with &lt;code&gt;-c&lt;/code&gt; option.  This option will check
the size of the output file, and download the rest of the file from the server.
I can even restart the download task with a &lt;strong&gt;different URI&lt;/strong&gt;.  This &lt;em&gt;feature&lt;/em&gt;
is not available in many sophisticated download managers.&lt;/p&gt;
&lt;p&gt;Recently, I came across &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt;, which is a command line download manager
which supports lots of protocols, including HTTP, FTP, BitTorrents, and etc.
Similar to &lt;code&gt;wget&lt;/code&gt;, I can resume the download tasks without problems!  And
there are several features which are not available in &lt;code&gt;wget&lt;/code&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Multiple tasks and scheduling&lt;/li&gt;
&lt;li&gt;Split the download task and download the file in parallel&lt;/li&gt;
&lt;li&gt;Web UI&lt;/li&gt;
&lt;li&gt;&lt;em&gt;... and etc&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In this post, I would like to give a brief introduction to &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="installation"&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Before we can start our discussion, we have to install &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; first.&lt;/p&gt;
&lt;p&gt;To install &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; on Ubuntu (or Debian), run the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install aria2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Besides, check the file permission of your &lt;code&gt;.netrc&lt;/code&gt; file.  It should be
600, i.e. only the owner can read or write the file.  You can change the
file permission with following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chmod &lt;span class="m"&gt;600&lt;/span&gt; ~/.netrc
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="download-files-with-aria2"&gt;
&lt;h2&gt;Download Files with Aria2&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; is similar to &lt;code&gt;wget&lt;/code&gt; command line tool.  We can simply download
the files with &lt;code&gt;aria2c&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example, to download the Debian 7.8 minimal CD image:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c http://cdimage.debian.org/debian-cd/7.8.0/amd64/iso-cd/debian-7.8.0-amd64-netinst.iso
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can specify the output file name with &lt;code&gt;-o&lt;/code&gt; option:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt; -o &lt;span class="o"&gt;[&lt;/span&gt;filename&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To resume a download task, we can specify the &lt;code&gt;-c&lt;/code&gt; option:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c -c &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt;
$ aria2c -c &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt; -o &lt;span class="o"&gt;[&lt;/span&gt;filename&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we wish to download a file parallelly, we can try the &lt;code&gt;-x&lt;/code&gt; option:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c -x&lt;span class="o"&gt;[&lt;/span&gt;num-parts&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt;
$ aria2c -x2 &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt;  &lt;span class="c1"&gt;# Split the task into two parts.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="run-aria2-as-a-daemon"&gt;
&lt;h2&gt;Run Aria2 as a Daemon&lt;/h2&gt;
&lt;p&gt;If we wish to use &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; as a download manager, we should run &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; as a
daemon.&lt;/p&gt;
&lt;p&gt;To start the Aria2 daemon:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c --enable-rpc --rpc-listen-all
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By default, &lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; will perform 5 tasks at the same time, to change the
number of concurrent download tasks, we can specify the &lt;code&gt;-j&lt;/code&gt; option:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c --enable-rpc --rpc-listen-all -j&lt;span class="o"&gt;[&lt;/span&gt;num-parallel&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example, to download the files sequentially:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2c --enable-rpc --rpc-listen-all -j1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After starting the Aria2 daemon, click here for the &lt;a class="reference external" href="http://ziahamza.github.io/webui-aria2/"&gt;Aria2 Web UI&lt;/a&gt;.  You can
add/remove the download tasks in the &lt;a class="reference external" href="http://ziahamza.github.io/webui-aria2/"&gt;Aria2 Web UI&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="control-daemon-with-aria2rpc"&gt;
&lt;h2&gt;Control Daemon with aria2rpc&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="http://aria2.sourceforge.net/"&gt;Aria2&lt;/a&gt; provides a command line tool, &lt;code&gt;aria2rpc&lt;/code&gt;, to control the daemon.
However, it is not installed by default.&lt;/p&gt;
&lt;p&gt;To obtain &lt;code&gt;aria2rpc&lt;/code&gt;, run the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /usr/share/doc/aria2/xmlrpc/aria2rpc.gz &lt;span class="p"&gt;|&lt;/span&gt; gzip -d &amp;gt; aria2rpc
$ chmod +x aria2rpc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After these steps, move &lt;code&gt;aria2rpc&lt;/code&gt; to your &lt;code&gt;$PATH&lt;/code&gt;, so that we
can run &lt;code&gt;aria2rpc&lt;/code&gt; directly.&lt;/p&gt;
&lt;p&gt;Now, we can add a download task with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2rpc addUri &lt;span class="o"&gt;[&lt;/span&gt;URI&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;options&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;task-id&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After adding a download task, an ID will be printed.  We can remove a task
with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2rpc remove &lt;span class="o"&gt;[&lt;/span&gt;task-id&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You may find more usages with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aria2rpc --help
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content><category term="linux"></category><category term="aria2"></category></entry><entry><title>2014 Year End Review</title><link href="http://logan.tw/posts/2014/12/31/2014-year-end-review/" rel="alternate"></link><published>2014-12-31T23:54:00+08:00</published><updated>2014-12-31T23:54:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-12-31:/posts/2014/12/31/2014-year-end-review/</id><summary type="html">&lt;p&gt;It's the end of 2014.  It has been an amazing year with a lot of astonishing
moments!&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;This is my first year to work as a &lt;em&gt;full-time software engineer&lt;/em&gt;.  I have
learned a lot from the real world software development, including the PMD,
annaul planning, software schedule estimation, and etc …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;It's the end of 2014.  It has been an amazing year with a lot of astonishing
moments!&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;This is my first year to work as a &lt;em&gt;full-time software engineer&lt;/em&gt;.  I have
learned a lot from the real world software development, including the PMD,
annaul planning, software schedule estimation, and etc.  Besides, I have
become the person who is responsible for some project.  However, I feel that
I still have a lot to learn.&lt;/li&gt;
&lt;li&gt;In the early June, I have been to &lt;a class="reference external" href="https://plus.google.com/photos/114533678157511059717/albums/6022083547074183473"&gt;Peng-hu&lt;/a&gt; with Chun-hung.  It is my first
time to take the &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Propeller_%28aeronautics%29"&gt;propeller&lt;/a&gt;.  It is my first time to pick &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Sea_urchin"&gt;urchins&lt;/a&gt; from
the sea.  During the trip, I have eaten the &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Sea_urchin"&gt;urchins&lt;/a&gt; and cactaceae
ice-cream.  It was an interesting experience to me.&lt;/li&gt;
&lt;li&gt;In the late August, I have been to Tai-tung to have a trip with Chih-yu.
This is my first backpack travel with my friends.  We have built a sand
castle on the beach, and we have seen the hot balloons at Luye.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have been changed a lot this year.  First, I decided to exercise everyday to
keep my body in shape.  I have lost a lot of weight, and several physical
examination indices have come back to normal.  Second, I have changed my view
to the life.  At the beginning of the year, I am a work acholic and often work
overtime.  However, I burned out in the middle of year.  That's the reason why
I decided to take a trip.  I realized that I still have to work for more than
20 years.  It is important to balance the work and the life.  Besides, it would
be good to leave more time for myself.  Third, I feel that there are still a
lot to learn as a professional software engineer and life hacker.  I decided to
write more notes and blog posts, so that I can have some retrospection in the
end of year.&lt;/p&gt;
&lt;p&gt;Hoping that I can become a better person next year.&lt;/p&gt;
</content><category term="diary"></category></entry><entry><title>Debian Backports</title><link href="http://logan.tw/posts/2014/12/20/debian-backports/" rel="alternate"></link><published>2014-12-20T22:04:00+08:00</published><updated>2014-12-20T22:04:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-12-20:/posts/2014/12/20/debian-backports/</id><summary type="html">&lt;p&gt;It is well-known that &lt;a class="reference external" href="http://www.debian.org/"&gt;Debian&lt;/a&gt; stable release is very &lt;em&gt;stable&lt;/em&gt;, i.e. the
packages are very old and well-tested.  However, this become a problem to me.&lt;/p&gt;
&lt;p&gt;Since &lt;a class="reference external" href="http://www.git-scm.org/"&gt;Git&lt;/a&gt; 1.9, we have to run the following command to silence a warning
when we are running &lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git config --global …&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;It is well-known that &lt;a class="reference external" href="http://www.debian.org/"&gt;Debian&lt;/a&gt; stable release is very &lt;em&gt;stable&lt;/em&gt;, i.e. the
packages are very old and well-tested.  However, this become a problem to me.&lt;/p&gt;
&lt;p&gt;Since &lt;a class="reference external" href="http://www.git-scm.org/"&gt;Git&lt;/a&gt; 1.9, we have to run the following command to silence a warning
when we are running &lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git config --global push.default simple
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But this command will add settings to &lt;code&gt;.gitconfig&lt;/code&gt; in the home directory,
which is unknown to the &lt;code&gt;git&lt;/code&gt; command from the Wheezy repository.  And,
unfortunately, I am using &lt;a class="reference external" href="https://alioth.debian.org/projects/buildd-tools/"&gt;schroot&lt;/a&gt; to switch between Ubuntu 14.04 and Debian
Wheezy.  Can I install a newer &lt;code&gt;git&lt;/code&gt; package on Debian Wheezy?&lt;/p&gt;
&lt;p&gt;Yes, &lt;a class="reference external" href="http://backports.debian.org/"&gt;Debian Backports&lt;/a&gt; is the answer.  &lt;strong&gt;Debian backports&lt;/strong&gt; provide
repositories that contains the newer software for Debian stable releases (with
necessary modification.)&lt;/p&gt;
&lt;p&gt;To install the packages from the backports, add the following line to
&lt;code&gt;/etc/apt/sources.list&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;deb http://ftp.us.debian.org/debian wheezy-backports main
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note: The URL can be any &lt;a class="reference external" href="https://www.debian.org/mirror/official"&gt;official Debian mirrors&lt;/a&gt;.  Usually, there will be
one line similar to &lt;code&gt;deb [URL] wheezy main&lt;/code&gt; in your &lt;code&gt;sources.list&lt;/code&gt;.
You can copy the line and replace &lt;code&gt;wheezy&lt;/code&gt; with &lt;code&gt;wheezy-backport&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Update the local APT information with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get update
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To install the packages from the backports:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install -t wheezy-backports &lt;span class="o"&gt;[&lt;/span&gt;package-name&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example, to install &lt;code&gt;git&lt;/code&gt; from the backports:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install -t wheezy-backports git
&lt;/pre&gt;&lt;/div&gt;
</content><category term="linux"></category><category term="debian"></category></entry><entry><title>RISC-V Microprocessor</title><link href="http://logan.tw/posts/2014/12/16/risc-v-microprocessor/" rel="alternate"></link><published>2014-12-16T23:20:00+08:00</published><updated>2014-12-16T23:20:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-12-16:/posts/2014/12/16/risc-v-microprocessor/</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://riscv.org"&gt;RISC-V&lt;/a&gt; is an instruction set architecture (ISA) released by UC Berkeley.
Besides, a high performance, power efficient, and royalty-free open source
implementation &lt;a class="reference external" href="https://github.com/ucb-bar"&gt;Rocket Chip&lt;/a&gt; is available.&lt;/p&gt;
&lt;p&gt;RISC-V was developed by Krste Asanović and David A. Patterson.  In their
&lt;a class="reference external" href="http://www.eecs.berkeley.edu/Pubs/TechRpts/2014/EECS-2014-146.pdf"&gt;technical report&lt;/a&gt;, they claimed that an open instruction set can benefit both …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://riscv.org"&gt;RISC-V&lt;/a&gt; is an instruction set architecture (ISA) released by UC Berkeley.
Besides, a high performance, power efficient, and royalty-free open source
implementation &lt;a class="reference external" href="https://github.com/ucb-bar"&gt;Rocket Chip&lt;/a&gt; is available.&lt;/p&gt;
&lt;p&gt;RISC-V was developed by Krste Asanović and David A. Patterson.  In their
&lt;a class="reference external" href="http://www.eecs.berkeley.edu/Pubs/TechRpts/2014/EECS-2014-146.pdf"&gt;technical report&lt;/a&gt;, they claimed that an open instruction set can benefit both
academic and industry.  They gave three arguments:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;Greater innovation&lt;/strong&gt; -- If there is an open instruction set and open
implementations, we could have greater innovation since the developers or
researchers can change the ISA, evaluate their new deisgn, and compare their
design with the others.  This is not possible with current proprietary ISA
licensing models.  Since most of the licensing models disallow the change of
ISA.  Some licensing model even prohibits the change of the ISA
implementations.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Open development&lt;/strong&gt; -- If the instruction set and its implementation is
developed in open, more developers can read and audit the source code and
find the possible errors.  It is well-known that the open model works for
operating system and compiler toolchain.  And RISC-V is the one to fill in
the missing piece for microprocessors.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reduce cost&lt;/strong&gt; -- If the ecosystem becomes mature, the price of the baseline
chip will become as low as the manufacture cost since everyone can download
the reference implementation and ask the IC foundries to produce the chip.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The design of the instruction set is yet anther question.  The choice of the
instruction is important since the ISA will last for several decades.  A good
design should include the essential features and exclude the unnecessary
features.  For example, it is necessary to have load/store instructions for
byte, short, float, and double; but it is unnecessary to include &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Delay_slot"&gt;delay slot&lt;/a&gt;
and &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Register_window"&gt;register window&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Krste and David predict that there are three trends for the computer evolution:
IoT devices, personal mobile devices, and warehouse-scale computers.  Thus,
RISC-V follows these design concepts:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;strong&gt;Base plus extension ISA&lt;/strong&gt; -- More applications are accelerating the
computation with &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Application-specific_integrated_circuit"&gt;ASIC&lt;/a&gt;, thus we have to leave the space for further
extension of the core instruction set.  This implies that we should leave
sufficient encoding space for extensions.  As a result, RISC-V has a core
instruction set with several extensions.  The bit operations, SIMD
instructions, and compact instructions are defined as the optional
extensions.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Compact instruction set encoding&lt;/strong&gt; -- On the memory limited IoT devices,
the code size will be an issue.  It will be helpful to have compact
instruction set encoding.  There is a compact instruction extension which
encodes the popular instructions in 16-bit (instead of 32-bit).  This is
similar to the Thumb instruction set for ARM, which has been proved to be
useful to reduce the code size.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Quadruple-precision floating point arithmetic&lt;/strong&gt; -- There are several
WSC applications using quadruple-precision arithmetic to process a lot of
data nowadays.  It will be a good idea to include them to the instruction
set.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Support 32-bit, 64-bit and even 128-bit address space&lt;/strong&gt; -- The
32-bit address space is still important to the IoT devices due to their
limited memory.  However, 64-bit address make more sense for the other
applications.  Although there is no 128-bit usage at the moment, we have to
leave sufficient room for extension.  If we don't plan for larger address
space in the early stage, it may be difficult to workaround in the future.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We can compare RISC-V with OpenRISC.  &lt;a class="reference external" href="http://openrisc.github.io"&gt;OpenRISC&lt;/a&gt; is an open source ISA as
well.  However, due to the encoding of the immediate value, there is little
encoding space left for extension.  Besides, it lacks for compact instruction
encoding and quadrupe-precision arithmetics.  Furthermore, when RISC-V was
developed, OpenRISC does not have 64-bit address space support at the time
(although OpenRISC have 64-bit support now.)&lt;/p&gt;
&lt;p&gt;In conclusion, &lt;a class="reference external" href="http://riscv.org"&gt;RISC-V&lt;/a&gt; is an open source ISA which work hard to fulfill the
design goals mentioned above.  Besides, we can
&lt;a class="reference external" href="http://riscv.org/download.html#tab_isa-sim"&gt;download the compiler and simulator&lt;/a&gt; right now.  A non-profit organization
&lt;a class="reference external" href="http://www.lowrisc.org"&gt;lowRISC&lt;/a&gt; is developing the development board for RISC-V.  I am looking
forward to the future of &lt;a class="reference external" href="http://riscv.org"&gt;RISC-V&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="reference"&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.eecs.berkeley.edu/Pubs/TechRpts/2014/EECS-2014-146.pdf"&gt;Instruction Sets Should Be Free: The Case for RISC-V&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://s3-us-west-1.amazonaws.com/riscv.org/riscv-spec-v2.0.pdf"&gt;User-level ISA Specification v2.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.eecs.berkeley.edu/Pubs/TechRpts/2011/EECS-2011-63.html"&gt;Improving Energy Efficiency and Reducing Code Size with RISC-V Compressed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.eejournal.com/archives/articles/20141210-risc-v/"&gt;EE Journal: Berkeley's RISC-V Wants to Be Free&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="processor"></category><category term="compiler"></category></entry><entry><title>Ubuntu Bluetooth Headset</title><link href="http://logan.tw/posts/2014/11/24/ubuntu-bluetooth-headset/" rel="alternate"></link><published>2014-11-24T23:04:00+08:00</published><updated>2014-11-24T23:04:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-11-24:/posts/2014/11/24/ubuntu-bluetooth-headset/</id><summary type="html">&lt;p&gt;I have bought a Bluetooth headset recently.  After connecting the device, I
was quite disappointed with the sound quality.  Fortunately, after searching on
the web, it seems that I am using the &amp;quot;Telphony Duplex&amp;quot; mode, which has low
quality.&lt;/p&gt;
&lt;p&gt;Here are the steps to switch to the mode with better …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have bought a Bluetooth headset recently.  After connecting the device, I
was quite disappointed with the sound quality.  Fortunately, after searching on
the web, it seems that I am using the &amp;quot;Telphony Duplex&amp;quot; mode, which has low
quality.&lt;/p&gt;
&lt;p&gt;Here are the steps to switch to the mode with better sound quality:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Left click on the &amp;quot;Bluetooth icon&amp;quot; on the top right corner.&lt;/li&gt;
&lt;li&gt;Move the cursor to your connected device.&lt;/li&gt;
&lt;li&gt;Left click on &amp;quot;Sound Settings ...&amp;quot; menu item.&lt;/li&gt;
&lt;li&gt;Change the mode from &amp;quot;Telphony Duplex (HSP/HFP)&amp;quot; to &amp;quot;&lt;strong&gt;High Fidelity Playback
(A2DP)&lt;/strong&gt;&amp;quot;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Reference: &lt;a class="reference external" href="http://ubuntuforums.org/showthread.php?t=2171043"&gt;Ubuntu Forums: Bluetooth Headset Bad Sound Quality&lt;/a&gt;.&lt;/p&gt;
</content><category term="linux"></category><category term="ubuntu"></category></entry><entry><title>Install GCIN on Ubuntu 14.04</title><link href="http://logan.tw/posts/2014/11/23/install-gcin-on-ubuntu-1404/" rel="alternate"></link><published>2014-11-23T14:36:00+08:00</published><updated>2014-11-23T14:36:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-11-23:/posts/2014/11/23/install-gcin-on-ubuntu-1404/</id><summary type="html">&lt;p&gt;I decided to look for some alternatives to &lt;a class="reference external" href="https://code.google.com/p/ibus/"&gt;IBus&lt;/a&gt; input method after tolerating
its long latency to switch between input methods for a long time.  As a
Taiwanese, both &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; and &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt; came up to my mind.  Unfortunately, both of
them need extra configuration after &lt;code&gt;apt-get&lt;/code&gt;.  Here's my note to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I decided to look for some alternatives to &lt;a class="reference external" href="https://code.google.com/p/ibus/"&gt;IBus&lt;/a&gt; input method after tolerating
its long latency to switch between input methods for a long time.  As a
Taiwanese, both &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; and &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt; came up to my mind.  Unfortunately, both of
them need extra configuration after &lt;code&gt;apt-get&lt;/code&gt;.  Here's my note to install
them properly.&lt;/p&gt;
&lt;div class="section" id="installation"&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;First, we have to install either &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; or &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt; packages with
&lt;code&gt;apt-get&lt;/code&gt;.  After installing the package, we have to change the
system settings and reboot; otherwise, ibus daemon will continue to capture
your keyboard.&lt;/p&gt;
&lt;p&gt;Here are the instructions:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Install the input methods&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# To install gcin:&lt;/span&gt;
$ sudo apt-get install gcin gcin-chewing

&lt;span class="c1"&gt;# To install hime:&lt;/span&gt;
$ sudo apt-get install hime hime-chewing
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install the &lt;a class="reference external" href="http://chewing.im/"&gt;chewing&lt;/a&gt; packages if you are interested in:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# For gcin users:&lt;/span&gt;
$ sudo apt-get install gcin-chewing

&lt;span class="c1"&gt;# For hime users:&lt;/span&gt;
$ sudo apt-get install hime-chewing
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Change the system settings for input method system:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Click on the &amp;quot;System Menu&amp;quot; button on the top right of the screen.&lt;/li&gt;
&lt;li&gt;Click the &amp;quot;System Settings ...&amp;quot; menu item.&lt;/li&gt;
&lt;li&gt;Click the &amp;quot;Language Support&amp;quot; button.&lt;/li&gt;
&lt;li&gt;Change &amp;quot;Keyboard input method system&amp;quot; field to gcin (or hime)&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Reboot the system (restart X11 window system)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;After rebooting your system, &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; or &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt; should start to work after
pressing Ctrl+Space.  You should be able to type some Chinese characters now.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="system-tray-icon"&gt;
&lt;h2&gt;System Tray Icon&lt;/h2&gt;
&lt;p&gt;Since Ubuntu Unity team decided to ship their own indicator protocol, you won't
be able to see the &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; (or &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt;) icon on the system tray (or the
notification area) if you are using Ubuntu 13.10 or newer.  To workaround the
problem, we have to install the Unity package built by the third-party.&lt;/p&gt;
&lt;p&gt;Here are the instructions for Ubuntu 14.04 &lt;a class="footnote-reference" href="#id2" id="id1"&gt;[1]&lt;/a&gt;:&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;Add APT repository for systray&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo add-apt-repository ppa:gurqn/systray-trusty
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Edit configuration&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo vim /etc/apt/preferences.d/systray-trusty
Package: *
Pin: release &lt;span class="nv"&gt;o&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;LP-PPA-gurqn-systray-trusty
Pin-Priority: &lt;span class="m"&gt;600&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Update APT&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get update
$ sudo apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Reboot the system (logout and login again)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You should be able to see the &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; or &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt; system tray after rebooting.&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;For Ubuntu 14.10, change &lt;code&gt;trusty&lt;/code&gt; with &lt;code&gt;utopic&lt;/code&gt; should work.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="hide-the-ibus-icon"&gt;
&lt;h2&gt;Hide the IBus Icon&lt;/h2&gt;
&lt;p&gt;Finally, we can hide the ibus icon since it is not useful anymore.&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Click on the &amp;quot;System Menu&amp;quot; button on the top right of the screen.&lt;/li&gt;
&lt;li&gt;Click the &amp;quot;System Settings ...&amp;quot; menu item.&lt;/li&gt;
&lt;li&gt;Click the &amp;quot;Text Entry&amp;quot; button.&lt;/li&gt;
&lt;li&gt;Uncheck &amp;quot;Show current input source in the menu bar&amp;quot;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;These are the tweaks for me to install &lt;a class="reference external" href="http://hyperrate.com/dir.php?eid=67"&gt;gcin&lt;/a&gt; or &lt;a class="reference external" href="http://hime.luna.com.tw/"&gt;hime&lt;/a&gt;, and hope this is
helpful.  Feel free to let me know if you have any problem.&lt;/p&gt;
&lt;/div&gt;
</content><category term="linux"></category><category term="ubuntu"></category><category term="gcin"></category></entry><entry><title>Fix GRUB2 Warning</title><link href="http://logan.tw/posts/2014/11/17/fix-grub2-warning/" rel="alternate"></link><published>2014-11-17T23:50:00+08:00</published><updated>2014-11-17T23:50:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-11-17:/posts/2014/11/17/fix-grub2-warning/</id><summary type="html">&lt;p&gt;It has been for a while that my desktop PC was not showing the &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB2&lt;/a&gt; menu.
Besides, I noticed that there was a warning message during the execution of
&lt;code&gt;update-grub&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Warning: Setting GRUB_TIMEOUT to a non-zero value when GRUB_HIDDEN_TIMEOUT
is set is no longer supported.&lt;/blockquote&gt;
&lt;p&gt;After checking the manual, I …&lt;/p&gt;</summary><content type="html">&lt;p&gt;It has been for a while that my desktop PC was not showing the &lt;a class="reference external" href="http://www.gnu.org/software/grub/"&gt;GRUB2&lt;/a&gt; menu.
Besides, I noticed that there was a warning message during the execution of
&lt;code&gt;update-grub&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
Warning: Setting GRUB_TIMEOUT to a non-zero value when GRUB_HIDDEN_TIMEOUT
is set is no longer supported.&lt;/blockquote&gt;
&lt;p&gt;After checking the manual, I learned that we can fix the problem by removing
following line from &lt;code&gt;/etc/default/grub&lt;/code&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
GRUB_HIDDEN_TIMEOUT=0
&lt;/pre&gt;
&lt;p&gt;And update the GRUB with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo update-grub
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After rebooting, GRUB should work now.&lt;/p&gt;
</content><category term="linux"></category><category term="grub"></category></entry><entry><title>First Post</title><link href="http://logan.tw/posts/2014/11/11/first-post/" rel="alternate"></link><published>2014-11-11T23:38:00+08:00</published><updated>2014-11-11T23:38:00+08:00</updated><author><name>Logan</name></author><id>tag:logan.tw,2014-11-11:/posts/2014/11/11/first-post/</id><summary type="html">&lt;p&gt;After using &lt;a class="reference external" href="https://blogger.com"&gt;Blogger&lt;/a&gt; for several years, I decided to switch to &lt;a class="reference external" href="http://docs.getpelican.com"&gt;Pelican&lt;/a&gt; and
&lt;a class="reference external" href="https://pages.github.com"&gt;GitHub Pages&lt;/a&gt;.  I feel it will be much easier to write down my thoughts,
notes, and ideas with reStructuredText.  As a result, I can update the blog
more frequently.&lt;/p&gt;
&lt;p&gt;In the foreseeable future, I will start to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;After using &lt;a class="reference external" href="https://blogger.com"&gt;Blogger&lt;/a&gt; for several years, I decided to switch to &lt;a class="reference external" href="http://docs.getpelican.com"&gt;Pelican&lt;/a&gt; and
&lt;a class="reference external" href="https://pages.github.com"&gt;GitHub Pages&lt;/a&gt;.  I feel it will be much easier to write down my thoughts,
notes, and ideas with reStructuredText.  As a result, I can update the blog
more frequently.&lt;/p&gt;
&lt;p&gt;In the foreseeable future, I will start to write some C++ related articles.
Stay tuned!  :-)&lt;/p&gt;
</content></entry></feed>